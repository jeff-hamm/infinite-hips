<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surgery Checklist - Infinite Hips</title>
    <link rel="stylesheet" href="../assets/dark-theme.css">
    <link rel="stylesheet" href="styles.css">
    
    <!-- üîß CONFIGURATION OPTIONS -->
    <!-- Option 1: External config file (recommended for cleaner HTML) -->
    <script src="config.js"></script>
    
    <!-- Option 2: Inline config (uncomment to override config.js) -->
    <!--
    <script>
        window.CHECKLIST_CONFIG = {
            // Google Sheets configuration
            sheetId: '1ziPiBhIYXTgVvs2HVokZQrFPjYdF9w-wcO9ivPwpgag',
            gid: '1860137714',
            
            // Apps Script URL for bidirectional sync
            appsScriptUrl: 'https://script.google.com/macros/s/AKfycbycobzIubmEzjq0_PhqA34reM4eVnZiFxSpiz9CnLSma48azXvZb5ICpa4N2id2Uyg/exec',
            
            // Auto-refresh interval (milliseconds)
            refreshInterval: 30000,
            
            // Maximum retry attempts
            maxRetries: 3
        };
    </script>
    -->
</head>
<body>
    <div class="todo-container">
        <h1>üìã Jeff's Surgery Checklist</h1>
        
        <div class="shared-info">
            <h3>üìä Google Sheets Powered</h3>
            <p>This checklist syncs with our shared Google Sheet. Check off items below or edit directly in the sheet.</p>
            <div id="progress-bar" style="background: #30363d; border-radius: 10px; height: 8px; margin: 12px 0;">
                <div id="progress-fill" style="background: #ff69b4; height: 100%; border-radius: 10px; width: 0%; transition: width 0.3s ease;"></div>
            </div>
            <div id="progress-text" style="font-size: 14px; color: #7d8590;">Loading tasks...</div>
            <p style="margin-top: 12px;">
                
                <a href="https://docs.google.com/spreadsheets/d/1ziPiBhIYXTgVvs2HVokZQrFPjYdF9w-wcO9ivPwpgag/edit?usp=sharing" 
                   target="_blank" class="sheet-link">üìù Edit in Google Sheets</a>
            </p>
        </div>

        <div class="controls">
            <button id="add-item-btn" class="add-item-btn">‚ûï Add New Task</button>
            <button id="refresh-btn" class="refresh-btn">üîÑ Refresh from Sheet</button>
            <div id="last-sync" style="color: #7d8590; font-size: 12px;">Never synced</div>
        </div>

        <!-- Add Task Form -->
        <div id="add-task-form" class="add-task-form" style="display: none;">
            <h3>‚ûï Add New Task</h3>
            <form id="new-task-form">
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-text">Task Description *</label>
                        <input type="text" id="task-text" name="taskText" required placeholder="Enter task description...">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-timeline">Timeline</label>
                        <select id="task-timeline" name="timeline">
                            <option value="">Select timeline...</option>
                            <option value="Other">Other (specify below)</option>
                        </select>
                        <input type="text" id="task-timeline-other" name="timelineOther" placeholder="Enter custom timeline..." style="display: none; margin-top: 8px;">
                    </div>
                    
                    <div class="form-group">
                        <label for="task-priority">Priority</label>
                        <select id="task-priority" name="priority">
                            <option value="">Select priority...</option>
                            <option value="1- Critical">1- Critical</option>
                            <option value="2- High">2- High</option>
                            <option value="3- Medium">3- Medium</option>
                            <option value="4- Low">4- Low</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                                        <div class="form-group">
                        <label for="task-category">Category</label>
                        <select id="task-category" name="category">
                            <option value="">Select category...</option>
                            <option value="Other">Other (specify below)</option>
                        </select>
                        <input type="text" id="task-category-other" name="categoryOther" placeholder="Enter custom category..." style="display: none; margin-top: 8px;">
                    </div>
                    
                                        <div class="form-group">
                        <label for="task-who-can-help">Helper</label>
                        <select id="task-who-can-help" name="whoCanHelp">
                            <option value="">Select helper...</option>
                            <option value="Other">Other (specify below)</option>
                        </select>
                        <input type="text" id="task-who-can-help-other" name="whoCanHelpOther" placeholder="Enter helper name..." style="display: none; margin-top: 8px;">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-how">How (Instructions)</label>
                        <textarea id="task-how" name="how" rows="2" placeholder="How to complete this task..."></textarea>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="task-notes">Notes</label>
                        <textarea id="task-notes" name="notes" rows="2" placeholder="Additional notes or details..."></textarea>
                    </div>
                </div>
                
                <div class="form-actions">
                    <button type="submit" class="btn-primary">üíæ Add Task</button>
                    <button type="button" id="cancel-add-btn" class="btn-secondary">‚ùå Cancel</button>
                </div>
            </form>
        </div>

        <div id="loading" class="loading" style="display: none;">
            Loading tasks from Google Sheets...
        </div>

        <div id="offline-notice" class="offline-notice" style="display: none;">
            ‚ö†Ô∏è Can't connect to Google Sheets. Showing cached data.
        </div>

        <div id="sample-notice" class="offline-notice" style="display: none; background: #ff69b4; color: #0d1117;">
            üìã Showing sample data. <a href="https://docs.google.com/spreadsheets/d/1ziPiBhIYXTgVvs2HVokZQrFPjYdF9w-wcO9ivPwpgag/edit?usp=sharing" target="_blank" style="color: #0d1117; font-weight: bold;">Make your Google Sheet public</a> to see real data.
        </div>

        <div id="error-message" class="error" style="display: none;"></div>

        <div id="todo-list">
            <!-- Tasks will be dynamically loaded here -->
        </div>
    </div>

    <div id="sync-status" class="sync-status">
        üìä Google Sheets
    </div>

    <script src="app.js"></script>
</body>
</html>
