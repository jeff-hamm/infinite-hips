<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Surgery Timeline Overview - Infinite Hips</title>
    <link rel="stylesheet" href="../assets/dark-theme.css">
    <style>
        .timeline-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .timeline-header {
            text-align: center;
            margin-bottom: 40px;
            padding: 20px;
            background: linear-gradient(145deg, var(--color-bg-alt) 0%, var(--color-purple-dark) 100%);
            border-radius: 12px;
            border: 1px solid var(--color-pink);
        }

        .surgery-date {
            font-size: var(--font-size-heading-main);
            color: var(--color-pink);
            margin-bottom: 10px;
        }

        .countdown {
            font-size: var(--font-size-text-large);
            color: var(--color-text-light);
        }

        .timeline-phase {
            margin-bottom: 30px;
            background: var(--color-bg-alt);
            border-radius: 12px;
            border: 1px solid var(--color-gray4);
            overflow: hidden;
        }

        .phase-header {
            background: linear-gradient(145deg, var(--color-gray4) 0%, var(--color-gray3) 100%);
            padding: 16px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .phase-header:hover {
            background: linear-gradient(145deg, var(--color-gray3) 0%, var(--color-gray2) 100%);
        }

        .phase-icon {
            font-size: var(--font-size-icon-large);
        }

        .phase-title {
            font-size: var(--font-size-heading-section);
            color: var(--color-pink);
            margin: 0;
            flex: 1;
        }

        .phase-timeline {
            font-size: var(--font-size-text-small);
            color: var(--color-text-muted);
        }

        .phase-status {
            font-size: var(--font-size-text-small);
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        .status-upcoming {
            background: var(--color-yellow);
            color: var(--color-black);
        }

        .status-current {
            background: var(--color-pink);
            color: var(--color-bg);
            animation: pulse 2s infinite;
        }

        .status-completed {
            background: var(--color-gray3);
            color: var(--color-text-light);
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .phase-content {
            padding: 20px;
            display: none;
        }

        .phase-content.active {
            display: block;
        }

        .milestone-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 16px;
            margin-bottom: 20px;
        }

        .milestone-card {
            background: var(--color-bg);
            border: 1px solid var(--color-gray4);
            border-radius: 8px;
            padding: 16px;
            transition: border-color 0.3s ease;
        }

        .milestone-card:hover {
            border-color: var(--color-pink);
        }

        .milestone-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 8px;
        }

        .milestone-icon {
            font-size: var(--font-size-icon-medium);
        }

        .milestone-title {
            font-size: var(--font-size-text-large);
            color: var(--color-white);
            font-weight: 600;
            margin: 0;
        }

        .milestone-description {
            font-size: var(--font-size-text-medium);
            color: var(--color-text-light);
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .milestone-source {
            font-size: var(--font-size-text-small);
            color: var(--color-text-muted);
            font-style: italic;
        }

        .key-dates {
            background: var(--color-bg-alt);
            border: 1px solid var(--color-pink);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .key-dates h3 {
            color: var(--color-pink);
            margin: 0 0 12px 0;
            font-size: var(--font-size-heading-section);
        }

        .date-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--color-gray4);
        }

        .date-item:last-child {
            border-bottom: none;
        }

        .date-label {
            font-size: var(--font-size-text-medium);
            color: var(--color-text);
        }

        .date-value {
            font-size: var(--font-size-text-medium);
            color: var(--color-pink);
            font-weight: 600;
        }

        .medical-team {
            background: var(--color-bg-alt);
            border: 1px solid var(--color-gray4);
            border-radius: 8px;
            padding: 16px;
            margin-bottom: 20px;
        }

        .data-sources {
            margin-top: 40px;
            padding: 20px;
            background: var(--color-bg-alt);
            border-radius: 8px;
            border: 1px solid var(--color-gray4);
        }

        .source-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
        }

        .source-tag {
            background: var(--color-gray4);
            color: var(--color-text);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: var(--font-size-text-small);
        }

        .expand-toggle {
            font-size: var(--font-size-text-small);
            color: var(--color-pink);
            margin-left: auto;
        }

        .restrictions-warning {
            background: linear-gradient(145deg, #4a1a1a 0%, #6a2a2a 100%);
            border: 1px solid #ff6b6b;
            border-radius: 8px;
            padding: 16px;
            margin: 16px 0;
        }

        .restrictions-warning h4 {
            color: #ff6b6b;
            margin: 0 0 8px 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .activity-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 12px;
        }

        .activity-item {
            background: var(--color-bg);
            border: 1px solid var(--color-gray4);
            border-radius: 6px;
            padding: 12px;
            text-align: center;
        }

        .activity-allowed {
            border-color: var(--color-pink);
        }

        .activity-restricted {
            border-color: #ff6b6b;
        }

        .sync-notice {
            background: var(--color-pink);
            color: var(--color-bg);
            padding: 12px;
            border-radius: 6px;
            margin-bottom: 20px;
            text-align: center;
            font-weight: 500;
        }

        @media (max-width: 768px) {
            .milestone-grid {
                grid-template-columns: 1fr;
            }
            
            .phase-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 8px;
            }
            
            .phase-timeline {
                align-self: flex-end;
            }
        }
    </style>
</head>
<body>
    <div class="nav">
        <a href="../index.html">‚Üê Back to Main Index</a>
    </div>

    <div class="header">
        <h1>üè• Surgery Timeline Overview</h1>
    </div>

    <div class="timeline-container">
        <div class="sync-notice" id="sync-notice">
            üìä This timeline combines your medical documents, Google Sheets tasks, and general hip replacement research
        </div>

        <div class="timeline-header">
            <div class="surgery-date">Hip Replacement Surgery</div>
            <div class="surgery-date">September 12, 2025 ‚Ä¢ 7:30am Check-in</div>
            <div class="countdown" id="countdown">Loading countdown...</div>
            <div style="margin-top: 12px; font-size: var(--font-size-text-medium); color: var(--color-text-light);">
                Dr. Jeffrey Wilde ‚Ä¢ Scripps Mission Valley
            </div>
        </div>

        <div class="key-dates">
            <h3>üóìÔ∏è Key Dates</h3>
            <div class="date-item">
                <span class="date-label">Surgery Date</span>
                <span class="date-value">September 12, 2025</span>
            </div>
            <div class="date-item">
                <span class="date-label">Start Pre-op Medications</span>
                <span class="date-value">September 5, 2025 (5 days before)</span>
            </div>
            <div class="date-item">
                <span class="date-label">Follow-up Appointment</span>
                <span class="date-value">October 7, 2025</span>
            </div>
            <div class="date-item">
                <span class="date-label">Expected Return to Work</span>
                <span class="date-value">October 21 - November 7, 2025</span>
            </div>
            <div class="date-item">
                <span class="date-label">Full Recovery</span>
                <span class="date-value">March 2026 (6 months)</span>
            </div>
        </div>

        <div id="timeline-phases">
            <!-- Timeline phases will be dynamically generated -->
        </div>

        <div class="medical-team">
            <h3 style="color: var(--color-pink); margin: 0 0 12px 0;">üë®‚Äç‚öïÔ∏è Medical Team</h3>
            <div class="date-item">
                <span class="date-label">Surgeon</span>
                <span class="date-value">Dr. Jeffrey Wilde ‚Ä¢ (858) 554-7993</span>
            </div>
            <div class="date-item">
                <span class="date-label">Game Ready Support</span>
                <span class="date-value">Amy Weiner ‚Ä¢ (619) 823-2691</span>
            </div>
            <div class="date-item">
                <span class="date-label">Physical Therapy</span>
                <span class="date-value">Luna PT ‚Ä¢ (619) 966-3822</span>
            </div>
            <div class="date-item">
                <span class="date-label">Emergency</span>
                <span class="date-value">Scripps Operator ‚Ä¢ (858) 554-9100</span>
            </div>
        </div>

        <div class="data-sources">
            <h3 style="color: var(--color-pink); margin: 0 0 12px 0;">üìö Data Sources</h3>
            <p style="color: var(--color-text-light); margin: 0;">This timeline is compiled from:</p>
            <div class="source-list">
                <span class="source-tag">Medical Documents</span>
                <span class="source-tag">Google Sheets Tasks</span>
                <span class="source-tag">Hip Replacement Research</span>
                <span class="source-tag">Dr. Wilde's Instructions</span>
                <span class="source-tag">Clinical Studies</span>
            </div>
        </div>
    </div>

    <script>
        // Surgery date and timeline data
        const surgeryDate = new Date('2025-09-12T07:30:00');
        
        // Timeline phases with integrated data
        const timelinePhases = [
            {
                id: 'preparation',
                title: 'Pre-Surgery Preparation',
                icon: 'üìã',
                timeline: '7 days before - Surgery day',
                description: 'Medical preparation, home setup, and administrative tasks',
                milestones: [
                    {
                        icon: 'üíä',
                        title: 'Stop Risk Medications',
                        description: 'Stop vitamins/supplements, ibuprofen, NSAIDs. Continue Tylenol and Vitamin D only.',
                        source: 'Dr. Wilde Pre-op Instructions'
                    },
                    {
                        icon: 'üßº',
                        title: 'Start Hibiclens Washing',
                        description: 'Daily washing with Hibiclens soap, neck down, emphasizing operative site.',
                        source: 'Medical Protocol'
                    },
                    {
                        icon: 'üëÉ',
                        title: 'Mupirocin Application',
                        description: 'Antibiotic ointment in nostrils 2x daily for 5 days before surgery.',
                        source: 'Infection Prevention'
                    },
                    {
                        icon: 'üè†',
                        title: 'Home Preparation',
                        description: 'Remove trip hazards, set up recovery area, arrange walker pathways.',
                        source: 'Google Sheets Tasks'
                    },
                    {
                        icon: 'üìÑ',
                        title: 'Administrative Tasks',
                        description: 'Disability paperwork, DMV handicap placard, work arrangements.',
                        source: 'Personal Planning'
                    },
                    {
                        icon: 'üöó',
                        title: 'Transportation',
                        description: 'Arrange rides to/from hospital, confirm pickup times.',
                        source: 'Surgery Logistics'
                    }
                ]
            },
            {
                id: 'surgery-day',
                title: 'Surgery Day',
                icon: 'üè•',
                timeline: 'September 12, 2025',
                description: 'Day of surgery procedures and immediate post-op',
                milestones: [
                    {
                        icon: 'üïñ',
                        title: '7:30am Check-in',
                        description: 'Arrive at Scripps Mission Valley 2 hours before surgery time.',
                        source: 'Surgery Schedule'
                    },
                    {
                        icon: 'üë®‚Äç‚öïÔ∏è',
                        title: 'Pre-Surgery Consultations',
                        description: 'Meet with Dr. Wilde and anesthesiologist, receive nerve block if applicable.',
                        source: 'Standard Protocol'
                    },
                    {
                        icon: 'üîß',
                        title: 'Hip Replacement Surgery',
                        description: 'Total hip replacement procedure with Dr. Wilde.',
                        source: 'Surgical Plan'
                    },
                    {
                        icon: 'üõèÔ∏è',
                        title: 'Recovery Room',
                        description: 'Post-surgery monitoring until stable, pain management begins.',
                        source: 'Post-op Protocol'
                    },
                    {
                        icon: 'üö∂',
                        title: 'First Steps',
                        description: 'Assisted walking within 24 hours, start gentle movement.',
                        source: 'Clinical Guidelines'
                    }
                ]
            },
            {
                id: 'immediate-recovery',
                title: 'Immediate Recovery',
                icon: 'üè†',
                timeline: 'Days 1-14 post-op',
                description: 'Critical healing period with intensive support',
                milestones: [
                    {
                        icon: 'üíä',
                        title: 'Pain Management',
                        description: 'Oxycodone, Celebrex, Dexamethasone, Acetaminophen as prescribed.',
                        source: 'Post-op Medications'
                    },
                    {
                        icon: 'üßä',
                        title: 'Ice Therapy',
                        description: 'Ice hip 5-10 times daily for 20 minutes, wrap in towel.',
                        source: 'Dr. Wilde Instructions'
                    },
                    {
                        icon: 'ü©π',
                        title: 'Wound Care',
                        description: 'Remove hospital bandage after 24 hours, leave incision open to air.',
                        source: 'Post-op Care Guide'
                    },
                    {
                        icon: 'üöø',
                        title: 'Shower Precautions',
                        description: 'Keep incision covered in shower for 7 days, then may get wet.',
                        source: 'Bathing Instructions'
                    },
                    {
                        icon: 'üèÉ‚Äç‚ôÇÔ∏è',
                        title: 'Gentle Walking',
                        description: 'Short, frequent walks focusing on range of motion.',
                        source: 'Physical Therapy'
                    },
                    {
                        icon: 'üìã',
                        title: 'Administrative',
                        description: 'File California State Disability claim day after surgery.',
                        source: 'Benefits Planning'
                    }
                ]
            },
            {
                id: 'early-recovery',
                title: 'Early Recovery',
                icon: 'üîÑ',
                timeline: 'Weeks 2-6 post-op',
                description: 'Building strength and increasing independence',
                milestones: [
                    {
                        icon: 'ü©π',
                        title: 'Remove Steri-strips',
                        description: 'Remove steri-strips after 2 weeks, monitor for healing.',
                        source: 'Wound Care Timeline'
                    },
                    {
                        icon: 'üèãÔ∏è‚Äç‚ôÇÔ∏è',
                        title: 'Physical Therapy',
                        description: 'Home health PT 2-3 times per week, focus on strength and mobility.',
                        source: 'Rehabilitation Plan'
                    },
                    {
                        icon: 'üöó',
                        title: 'May Resume Driving',
                        description: 'When off narcotics and not using walker (typically 3-4 weeks).',
                        source: 'Activity Guidelines'
                    },
                    {
                        icon: 'üö¥‚Äç‚ôÇÔ∏è',
                        title: 'Stationary Bike',
                        description: 'May try stationary bike if can safely get on/off at 3-4 weeks.',
                        source: 'Exercise Progression'
                    },
                    {
                        icon: 'üíä',
                        title: 'Reduce Pain Medication',
                        description: 'Begin weaning off opioids, goal to be off narcotics by 1 month.',
                        source: 'Pain Management'
                    },
                    {
                        icon: 'ü¶Ω',
                        title: 'Walker to Cane',
                        description: 'Transition from walker to cane when feeling safe and steady.',
                        source: 'Mobility Progression'
                    }
                ]
            },
            {
                id: 'continued-recovery',
                title: 'Continued Recovery',
                icon: 'üìà',
                timeline: 'Months 2-3 post-op',
                description: 'Return to daily activities and work',
                milestones: [
                    {
                        icon: 'üèä‚Äç‚ôÇÔ∏è',
                        title: 'Swimming Allowed',
                        description: 'May begin swimming once incision fully healed (4-5 weeks).',
                        source: 'Activity Guidelines'
                    },
                    {
                        icon: 'üíº',
                        title: 'Return to Work',
                        description: 'Most patients return to work 6-8 weeks post-surgery.',
                        source: 'Work Planning'
                    },
                    {
                        icon: 'üè•',
                        title: 'Follow-up Visit',
                        description: 'Post-op appointment and X-ray with Dr. Wilde on October 7, 2025.',
                        source: 'Medical Schedule'
                    },
                    {
                        icon: 'ü¶∑',
                        title: 'Dental Restrictions End',
                        description: 'May resume dental procedures after 3 months (December 12, 2025).',
                        source: 'Medical Restrictions'
                    },
                    {
                        icon: '‚úàÔ∏è',
                        title: 'International Travel',
                        description: 'International flights allowed after 3 months.',
                        source: 'Travel Guidelines'
                    },
                    {
                        icon: 'üèÉ‚Äç‚ôÇÔ∏è',
                        title: 'Increased Activity',
                        description: 'Most daily activities manageable, some restrictions on high-impact.',
                        source: 'Clinical Research'
                    }
                ]
            },
            {
                id: 'long-term-recovery',
                title: 'Long-term Recovery',
                icon: 'üéØ',
                timeline: 'Months 3-6+ post-op',
                description: 'Full recovery and activity resumption',
                milestones: [
                    {
                        icon: '‚õ≥',
                        title: 'Golf & Dancing',
                        description: 'May resume golfing, hiking, dancing at 8-12 weeks.',
                        source: 'Activity Progression'
                    },
                    {
                        icon: 'üí™',
                        title: 'Full Strength Return',
                        description: 'Continued improvement in strength, flexibility, and endurance.',
                        source: 'Clinical Studies'
                    },
                    {
                        icon: 'üîÑ',
                        title: 'Ongoing Maintenance',
                        description: 'Regular exercise, weight management, joint protection.',
                        source: 'Long-term Care'
                    },
                    {
                        icon: '‚ö†Ô∏è',
                        title: 'Permanent Restrictions',
                        description: 'Avoid high-impact activities like tennis, running long-term.',
                        source: 'Joint Preservation'
                    },
                    {
                        icon: 'üìÖ',
                        title: 'Annual Check-ups',
                        description: 'Regular follow-ups to monitor implant health and function.',
                        source: 'Standard Care'
                    }
                ]
            }
        ];

        // Initialize timeline
        function initializeTimeline() {
            updateCountdown();
            generateTimelinePhases();
            
            // Update countdown every minute
            setInterval(updateCountdown, 60000);
            
            // Add click handlers for phase headers
            document.addEventListener('click', (e) => {
                if (e.target.closest('.phase-header')) {
                    const phase = e.target.closest('.timeline-phase');
                    const content = phase.querySelector('.phase-content');
                    const isActive = content.classList.contains('active');
                    
                    // Close all phases
                    document.querySelectorAll('.phase-content').forEach(c => c.classList.remove('active'));
                    
                    // Open clicked phase if it wasn't already open
                    if (!isActive) {
                        content.classList.add('active');
                    }
                }
            });
        }

        function updateCountdown() {
            const now = new Date();
            const timeDiff = surgeryDate - now;
            const countdownEl = document.getElementById('countdown');
            
            if (timeDiff > 0) {
                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                
                if (days > 0) {
                    countdownEl.textContent = `${days} days, ${hours} hours until surgery`;
                } else if (hours > 0) {
                    countdownEl.textContent = `${hours} hours until surgery`;
                } else {
                    const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                    countdownEl.textContent = `${minutes} minutes until surgery`;
                }
            } else {
                const daysSince = Math.floor(-timeDiff / (1000 * 60 * 60 * 24));
                countdownEl.textContent = `Surgery was ${daysSince} days ago`;
            }
        }

        function generateTimelinePhases() {
            const container = document.getElementById('timeline-phases');
            const now = new Date();
            
            timelinePhases.forEach(phase => {
                const phaseEl = document.createElement('div');
                phaseEl.className = 'timeline-phase';
                
                // Determine phase status
                let status = 'upcoming';
                let statusText = 'Upcoming';
                
                if (phase.id === 'preparation' && now < surgeryDate) {
                    status = 'current';
                    statusText = 'Active';
                } else if (phase.id === 'surgery-day' && isSameDay(now, surgeryDate)) {
                    status = 'current';
                    statusText = 'Today!';
                } else if (phase.id === 'immediate-recovery' && now > surgeryDate && now < addDays(surgeryDate, 14)) {
                    status = 'current';
                    statusText = 'Active';
                } else if (phase.id === 'early-recovery' && now > addDays(surgeryDate, 14) && now < addDays(surgeryDate, 42)) {
                    status = 'current';
                    statusText = 'Active';
                } else if (phase.id === 'continued-recovery' && now > addDays(surgeryDate, 42) && now < addDays(surgeryDate, 90)) {
                    status = 'current';
                    statusText = 'Active';
                } else if (phase.id === 'long-term-recovery' && now > addDays(surgeryDate, 90)) {
                    status = 'current';
                    statusText = 'Active';
                } else if (now > surgeryDate) {
                    status = 'completed';
                    statusText = 'Completed';
                }
                
                phaseEl.innerHTML = `
                    <div class="phase-header">
                        <span class="phase-icon">${phase.icon}</span>
                        <div style="flex: 1;">
                            <div class="phase-title">${phase.title}</div>
                            <div class="phase-timeline">${phase.timeline}</div>
                        </div>
                        <div class="phase-status status-${status}">${statusText}</div>
                        <div class="expand-toggle">‚ñº</div>
                    </div>
                    <div class="phase-content ${status === 'current' ? 'active' : ''}">
                        <p style="color: var(--color-text-light); margin-bottom: 20px;">${phase.description}</p>
                        <div class="milestone-grid">
                            ${phase.milestones.map(milestone => `
                                <div class="milestone-card">
                                    <div class="milestone-header">
                                        <span class="milestone-icon">${milestone.icon}</span>
                                        <h4 class="milestone-title">${milestone.title}</h4>
                                    </div>
                                    <div class="milestone-description">${milestone.description}</div>
                                    <div class="milestone-source">Source: ${milestone.source}</div>
                                </div>
                            `).join('')}
                        </div>
                        ${generateRestrictionsWarning(phase)}
                    </div>
                `;
                
                container.appendChild(phaseEl);
            });
        }

        function generateRestrictionsWarning(phase) {
            const restrictions = {
                'immediate-recovery': {
                    title: '‚ö†Ô∏è Critical Restrictions',
                    items: ['No bending >90¬∞', 'No crossing legs', 'No twisting', 'No heavy lifting', 'Walker required']
                },
                'early-recovery': {
                    title: '‚ö†Ô∏è Important Restrictions',
                    items: ['Limit sitting 30-60 min', 'No high-impact activities', 'Walker/cane for safety', 'No soaking incision']
                },
                'continued-recovery': {
                    title: '‚ö†Ô∏è Activity Guidelines',
                    items: ['No domestic flights (6 weeks)', 'Avoid excessive bending', 'Physical therapy focus', 'Monitor for complications']
                }
            };

            if (restrictions[phase.id]) {
                const restriction = restrictions[phase.id];
                return `
                    <div class="restrictions-warning">
                        <h4>${restriction.title}</h4>
                        <div class="activity-grid">
                            ${restriction.items.map(item => `
                                <div class="activity-item activity-restricted">${item}</div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            return '';
        }

        function isSameDay(date1, date2) {
            return date1.toDateString() === date2.toDateString();
        }

        function addDays(date, days) {
            const result = new Date(date);
            result.setDate(result.getDate() + days);
            return result;
        }

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initializeTimeline);
    </script>
</body>
</html>

